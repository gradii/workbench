<tri-card>
  <tri-card-header>
    <div class="form-header">
      <h6 class="form-title">{{ formTitle }}</h6>
      <button
        *ngIf="showImport"
        class="bakery-button icon-padding"
        triTextButton
        color="secondary"
        size="tiny"
        type="reset"
        (click)="importPage.emit()"
      >
        <tri-icon svgIcon="outline:download"></tri-icon>
        IMPORT PAGES
      </button>
    </div>
  </tri-card-header>
  <tri-card-body>
  <form [formGroup]="pageForm" (ngSubmit)="onSubmit()" #formElement="ngForm">

    <label>
      Page Name
      <input placeholder="name" #nameInput triInput fullWidth formControlName="name" />
      <div *ngIf="isFieldInvalid('name')" class="validation-errors">
        <div *ngIf="isFieldHasError('name', 'required')">Page name is required</div>
        <div *ngIf="isFieldHasError('name', 'pattern')">
          Page name can contain only words, numbers and spaces and should start with a word.
        </div>
        <div *ngIf="isFieldHasError('name', 'unique')">Page or Component with that name already exists.</div>
      </div>
    </label>
    <label>
      Page URL
      <input placeholder="url" triInput fullWidth formControlName="url" (keyup)="detachUrlFromName()" />
      <div *ngIf="isFieldInvalid('url')" class="validation-errors">
        <div *ngIf="isFieldHasError('url', 'required')">Page url is required</div>
        <div *ngIf="isFieldHasError('url', 'pattern')">Page url can contain only words, numbers and spaces</div>
        <div *ngIf="isFieldHasError('url', 'unique')">Page with that url already exists.</div>
      </div>
    </label>

    <label>
      Parent Page
      <tri-select
        *ngIf="pages?.length"
        class="parent-select bakery-dropdown"
        shape="rectangle"
        fullWidth
        placeholder="None"
        formControlName="parentPageId"
      >
        <tri-option>None</tri-option>
        <tri-option *ngFor="let parentPage of pages" [value]="parentPage.id">{{ parentPage.name }}</tri-option>
      </tri-select>
    </label>
    <div class="controls">
      <button triButton variant="text" size="small" class="cancel-btn" type="reset" (click)="cancel.emit()">
        Cancel
      </button>
      <button triButton size="small" color="primary" type="submit">
        {{ buttonLabel }}
      </button>
    </div>
  </form>
  </tri-card-body>
</tri-card>
