<input
  type="text"
  #input
  [ngClass]="getInputClasses()"
  [value]="value"
  (input)="onValueChange(input.value)"
  (keydown.arrowUp)="addToValue(singleStep)"
  (keydown.shift.arrowUp)="addToValue(doubleStep)"
  (keydown.control.arrowUp)="addToValue(tripleStep)"
  (keydown.arrowDown)="addToValue(-singleStep)"
  (keydown.shift.arrowDown)="addToValue(-doubleStep)"
  (keydown.control.arrowDown)="addToValue(-tripleStep)"
  (focusout)="resetToLatestValueIfInvalid()"
/>

<span
  [triPopover]="unitOrValueOptions"
  triPopoverPosition="bottom"
  triPopoverClass="no-arrow"
  [class.unit]="isValueEditable()"
  [class.value]="!isValueEditable()"
><!--
keep this comment to avoid extra whitespace
-->{{ isValueEditable() ? unit : value }}
</span>

<ng-template #unitOrValueOptions>
  <bc-input-unit-list [unitList]="unitsOrAuto" (updateUnit)="onUnitChange($event)"></bc-input-unit-list>
</ng-template>
